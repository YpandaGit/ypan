{
  "filename": "2.md",
  "__html": "<h1>SpringBoot接口返回数据统一将LONG转为String</h1>\n<h2>说明</h2>\n<p>​    由于WEB端无法处理过长的数字，会造成精度丢失的问题，所以需要将过长的数字转为String给WEB端。</p>\n<ol>\n<li>继承WebMvcConfigurerAdapter</li>\n</ol>\n<p>创建一个新类继承WebMvcConfigurerAdapter并且添加注解@Component、@Configuration。</p>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-meta\">@configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">WebAppConfigurer</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">WebMvcConfigurerAdapter</span>  </span>{\n\n}\n</code></pre>\n<ol start=\"2\">\n<li>重写extendMessageConverters方法</li>\n</ol>\n<pre><code class=\"language-JAVA\">\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">extendMessageConverters</span><span class=\"hljs-params\">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>{\n\t\t<span class=\"hljs-comment\">// 排除掉原来的MappingJackson2HttpMessageConverter</span>\n\t\tList&lt;MappingJackson2HttpMessageConverter&gt; originalConverters = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();\n\t\t<span class=\"hljs-keyword\">for</span> (HttpMessageConverter&lt;?&gt; converter : converters) {\n\t\t\t<span class=\"hljs-keyword\">if</span> (converter <span class=\"hljs-keyword\">instanceof</span> MappingJackson2HttpMessageConverter) {\n\t\t\t\toriginalConverters.add((MappingJackson2HttpMessageConverter) converter);\n\t\t\t}\n\t\t}\n\t\t<span class=\"hljs-keyword\">if</span> (CollectionUtils.isNotEmpty(originalConverters)) {\n\t\t\tconverters.removeAll(originalConverters);\n\t\t}\n\t\t\n\t\t<span class=\"hljs-comment\">// 创建新的converter</span>\n\t\tMappingJackson2HttpMessageConverter jackson2HttpMessageConverter = <span class=\"hljs-keyword\">new</span> MappingJackson2HttpMessageConverter();\n\t\tObjectMapper objectMapper = <span class=\"hljs-keyword\">new</span> ObjectMapper();\n\n\t\t<span class=\"hljs-comment\">// 将long类型的数据转为String类型</span>\n\t\tSimpleModule simpleModule = <span class=\"hljs-keyword\">new</span> SimpleModule();\n\t\tsimpleModule.addSerializer(Long.class, ToStringSerializer.instance);\n\t\tsimpleModule.addSerializer(Long.TYPE, ToStringSerializer.instance);\n\t\tsimpleModule.addSerializer(<span class=\"hljs-keyword\">long</span>.class, ToStringSerializer.instance);\n\t\tobjectMapper.registerModule(simpleModule);\n\t\tjackson2HttpMessageConverter.setObjectMapper(objectMapper);\n\t\tconverters.add(jackson2HttpMessageConverter);\n\t}\n</code></pre>\n<hr>\n<p>感谢阅读！</p>\n<p>2019-05-13</p>\n",
  "link": "\\zh-cn\\blog\\java\\2.html",
  "meta": {
    "title": "SpringBoot接口返回数据统一将LONG转为String",
    "keywords": "Spring,统一返回"
  }
}